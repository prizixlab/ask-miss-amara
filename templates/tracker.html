<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="https://unpkg.com/mvp.css">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
<meta name="theme-color" content="#cdb4db">
<main>
  <header style="display:flex;justify-content:space-between;align-items:center">
    <h1>Path Mirror</h1>
    <nav><a href="/">Home</a> · <a href="/app">Ask</a> · <a href="/daily">Aura</a> · <a href="/daily/draw">Card/Rune</a> · <a href="/moon">Moon</a> · <a href="/tracker">Tracker</a></nav>
  </header>

  <section>
    <h2>Log a card</h2>
    <form action="/tracker/add" method="post">
      <input name="card_name" placeholder="The High Priestess" required>
      <input name="notes" placeholder="any notes (optional)">
      <button>Add</button>
    </form>
  </section>

  <section>
    <h2>History</h2>
    {% if rows|length == 0 %}
      <p>No cards yet. Start logging!</p>
    {% else %}
      {% for r in rows %}
        <article>
          <p><b>{{ r.card_name }}</b> <small>— {{ r.created_at.date() }}</small></p>
          {% if r.notes %}<p>{{ r.notes }}</p>{% endif %}
        </article>
      {% endfor %}
    {% endif %}
  </section>

  {% if top %}
  <section>
    <h2>Frequent cards</h2>
    <ul>
      {% for name, cnt in top %}
        <li>{{ name }} — {{ cnt }}</li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
</main>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('{{ url_for("static", filename="service-worker.js") }}');
}
</script>
